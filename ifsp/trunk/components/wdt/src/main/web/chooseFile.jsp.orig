<%@ page contentType="text/html;charset=utf-8"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="t"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%/*@ taglib uri="http://java.sun.com/jsf/facelets" prefix="ui"*/%>
<%@include file="inc/menu.inc" %>

<f:view>

	<!-- navibar -->
	<%@include file="inc/navibar.filechooser.wf.inc" %>
	
	<!-- div class="content">
	<h1>IF/5 Online Workflow Design Tool</h1>
	<br>
	... I am a file chooser
	<br><br><br-->
	<f:loadBundle basename="eu.planets_project.ifr.core.wdt.gui.UIResource" var="res"/>
	
  	
 <div class="content"> 	
 																											
 <h:form id="drBrowserForm">
 	
 <p> 
 <h:outputText value="#{res['browse_data.browsing']}"/> 
 				<h:commandLink value="#{fileBrowser.rootUrl}" actionListener="#{fileBrowser.redirect}"/>
 </p>
                
 <div class="filepane">
 <div class="filebrowse">
  	<t:tree2 id="filerTree" value="#{fileBrowser.filerTree}" var="do" varNodeToggler="t" showRootNode="true" showLines="true" preserveToggle="true" clientSideToggle="true">
    
	    <f:facet name="folder">
	    	<h:panelGroup>
	      	<h:commandLink action="success">
	        <t:graphicImage value="/graphics/filetype_folder.gif" border="0" />
	        <h:outputText value=" #{do.leafname}"/>
	        <t:updateActionListener property="#{fileBrowser.location}" value="#{do.uri}" />
	        </h:commandLink>
	      </h:panelGroup>
	    </f:facet>
	    
	    <f:facet name="file">
	    	<h:panelGroup>
	      <img src="${facesContext.externalContext.requestContextPath}/graphics/filetype_file.png" alt="directory" title="directory"/>
	      <h:outputText value=" #{do.leafname}"/>
	      </h:panelGroup>
	    </f:facet>
    
    </t:tree2>
  </div>
<div class="filemain">
<div id="dataRegistryBrowser    <	    <t:dataTable id="FileBrowserList" var="do" value="#{fileBrowser.list}">
                
    <h:column>
      <h:selectBooleanCheckbox value="#{do.selected}" rendered="#{do.selectable}"/>
    </h:column>
           
    <h:column>
      <f:facet name="head#{res['browse_data.name']}name</f:facet>
    
	        <h:panelGroup rendered="#{do.directory}">
	      <h:commandLink action="success">
	        <img src="${facesContext.externalContext.requestContextPath}/graphics/filetype_folder.gif" alt="directory" title="directory"/>
	        <h:outputText value=" #{do.leafname}"/>
	        <t:updateActionListener property="#{fileBrowser.location}" value="#{do.uri}" />
	      </h:commandLink>
	    </h:panelGr
	    oup>
      <h:panelGroup rendered="#{not do.directory}">
        <img src="${facesContext.externalContext.requestContextPath}/graphics/filetype_file.png" alt="directory" title="directory"/>
        <h:outputText value=" #{do.leafname}"/>
      </h:panelGroup>
    </h:column>

    <h	:column>
    <f:facet name="hea #{res['browse_data.size']}size</f:fac    
    </h:column>
    
    <	h:column>
    <f:facet name="head#{res['browse_data.type']}type<	/f:facet>
    <h:panelGroup rendered="#{do.director#{res['browse_data.folder']}    </h:pa	nelGroup>
    <h:panelGroup rendered="#{not do.director#{res['browse_data.file']}    </h:panelGroup>
    </h:column>
    
    <	h:column>
    <f:facet name="head#{res['browse_data.dateAdded']}dded</f:fa     
    </h:column>
    
    	<h:column>
    <f:facet name="head#{res['browse_data.dateModified']}fied</f:fcet>
    
    </h:column>
 	     </t:dataTable>

                
                <h:commandButton action="#{fileBrowser.selectAll}" 
                  val#{res['browse_data.selectAll']}tAll"/>
                <h:commandButton action="#{fileBrowser.selectNone}"
                  val#{res['browse_data.selectNone']}None"/>
                
                </p>
                <h:panelGroup rendered="#{isInExperiment}">
                <p>
                <h:commandButton action="#{fileBrowser.addToExperiment}"
                  value#{res['browse_data.addToExperiment']}nt"/>
                </p>
                <p>
                <h:commandButton action="goToStage2"
                  value="#{res['browse_data.returnToExperiment']}"/>
                </p>
                </h:panelGroup>
                
    </div>
   </div>
  </div>
  
  <br><br>
  
</h:form>
  
          

</f:view>
<%@include file="inc/footer.inc" %>