<paths>


    <path>
        <!--
            Silly migration path for conversion of lower case text to upper case
            text, using 'cat' and 'tr', for demonstration of the usage of
            temporary source and destination files. The migration paths
            described by a combination of one of the input formats and the
            output format will overwrite any similar definitions from any
            earlier path definitions, that is, definitions closer to the top of
            the configuration file.
        -->
        <inputformats>

            <!--
                List of format URIs identifying the valid input formats for the
                wrapped command(s) in this "path" section. It is recommended to
                use PRONOM URIs where possible in order to achieve the most
                accurate description of the formats. File suffixes are
                inaccurate as most file formats are available in several
                revisions.
            -->
            <uri value="info:test/lowercase" />
        </inputformats>

        <outputformat>
            <!--
                Format URIs identifying the output format of the wrapped
                command(s) in this "path" section. It is recommended to use a
                PRONOM URI when possible in order to achieve the most accurate
                description of the format. File suffixes are inaccurate as most
                file formats are available in several revisions.
            -->
            <uri value="info:test/uppercase" />
        </outputformat>


        <commandLine>
            <!--
                This is the exact shell command line to be wrapped, except from
                that all command parameters are substituted by tags like
                "%some_label%". The tag name (in this case "some_label") must be
                defined in the "toolparameters" section.
            -->
            cat %param1% %tempSource | tr %param2% > %tempDestination
        </commandLine>

        <!--
            The tool will terminate with an error if not all tool parameters are
            defined at invocation. Any specified parameters will overwrite the
            corresponding parameters from any specified tool preset. That is, if
            the caller of the tool specifies e.g. mode=complete and param1=-n,
            then the tool will be invoked with param1=-n and param2=[:lower:]'
            '[:upper:] which will have the same effect as just specifying
            mode=extra. Given the definitions of this example file.
        -->

        <toolparameters>
            <!--
                All these parameters must be specified by the caller if no
                preset is specified. The occurrences of the parameter names in
                the above command line will be substituted with the value
                assigned to them by the caller.
            -->
            <parameter name="param1">
                <description>Command line parameters for the 'cat' command. See
                    'man cat'.
                </description>
            </parameter>
            <parameter name="param2">
                <description>Command line parameters for the 'tr' command. See
                    'man tr'.
                </description>
            </parameter>
        </toolparameters>

        <!--
            Presets which can be used instead of messing with the command line
            parameters. These presets can also be used as base settings that can
            be modified by specifying one or more tool parameters at the same
            time. That is, any explicitly specified tool parameter will
            overwrite the one from any chosen preset.
        -->

        <toolpresets>
            <!--
                This section defines all possible preset types for the tool. The
                caller may only use one of the preset types when calling, e.g.
                specifying both mode=AC-DC and quality=good would result in an
                error. If no parameters or preset is specified by the caller,
                then the "mode" preset type is automatically chosen.
            -->
            <optionlist default="mode">
                <!--
                    If no parameters or preset is specified by the caller, then
                    "mode = complete" is automatically chosen.
                -->
                <option name="mode">
                    <optionlist default="complete">
                        <option name="complete">
                            <preset name="param1"></preset>
                            <preset name="param2">'[:lower:]' '[:upper:]'
                            </preset>
                            <description>Uppercase all.</description>
                        </option>
                        <option name="AC-DC">
                            <preset name="param1"></preset>
                            <preset name="param2">'A,D' 'D,A'</preset>
                            <description>AC-DC to DC-AC</description>
                        </option>
                        <option name="extra">
                            <preset name="param1">-n</preset>
                            <preset name="param2">'[:lower:]' '[:upper:]'
                            </preset>
                            <description>Uppercase all and add line numbers.
                            </description>
                        </option>
                    </optionlist>
                    <description>
                        Mode presets for the test tool.
                    </description>
                </option>

                <!--
                    This "quality" preset type is essentially the same as the
                    "mode" type, and is only included to demonstrate that it is
                    possible for the caller to have more preset types to choose
                    from.
                -->
                <option name="quality">
                    <optionlist>
                        <option name="good">
                            <preset name="param1"></preset>
                            <preset name="param2">'[:lower:]' '[:upper:]'
                            </preset>
                            <description>Uppercase all.</description>
                        </option>
                        <option name="better">
                            <preset name="param1"></preset>
                            <preset name="param2">'A,D' 'D,A'</preset>
                            <description>AC-DC to DC-AC</description>
                        </option>
                        <option name="best">
                            <preset name="param1">-n</preset>
                            <preset name="param2">'[:lower:]' '[:upper:]'
                            </preset>
                            <description>Uppercase all and add line numbers.
                            </description>
                        </option>
                    </optionlist>
                    <description>
                        Quality presets for the test tool.
                    </description>
                </option>
            </optionlist>
        </toolpresets>
    </path>

    <!--
        The following path is just an illustration of the possibility to define
        multiple migration paths for the same wrapped tool. However, there is no
        validation of that the tool used in the various path definitions are
        actually the same, as this is not possible due to the fact that the
        command lines may be substantially different although the same tool is
        used for the migration, as different helper tools may be used e.g. for
        pre- or post-processing. Thus, it is the responsibility of the person
        writing the configuration file that it is in fact the same migration
        tool used by all the defined paths.
    -->
    <path>

        <inputformats>
            <uri value="info:test/foo" />
        </inputformats>

        <outputformat>
            <uri value="info:test/bar" />
        </outputformat>

        <commandLine>cat %param1% %tempSource | tr %param2% > %tempDestination
        </commandLine>

        <toolparameters>
            <parameter name="param1">
                <description>Command line parameters for the 'cat' command. See
                    'man cat'.
                </description>
            </parameter>
            <parameter name="param2">
                <description>Command line parameters for the 'tr' command. See
                    'man tr'.
                </description>
            </parameter>
        </toolparameters>

        <toolpresets>
            <!-- No presets -->
        </toolpresets>
    </path>
</paths>