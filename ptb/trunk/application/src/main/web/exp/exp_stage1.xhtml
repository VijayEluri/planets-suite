<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:t="http://myfaces.apache.org/tomahawk">
<body>
<ui:composition template="/WEB-INF/templates/main_template.xhtml">
  <ui:define name="title">
        #{res.title} - #{res['new_exp.pageTitle']} - #{res['new_exp.stage1']}
  </ui:define>

<ui:define name="header">
	<ui:include src="/WEB-INF/templates/header.xhtml">
		<ui:param name="page" value="new_exp"/>
	</ui:include>
        	<script type="text/javascript" src="${facesContext.externalContext.requestContextPath}/js/overlib/overlib.js"></script>	
        		<script type="text/javascript">
		<!--
		function toggleRequired(evt) {
	evt = (evt) ? evt: event;
	var target = (evt.target) ? evt.target : evt.srcElement;
	
	for(var i=1;i<7;i++) {
	var block = document.getElementById("asterisk["+i+"]");
	
	if(target.id == "true") {
		block.style.display = "";
		}
	
	else {
		block.style.display = "none";
		}
	}
	
	}
        
function countLines(strtocount, cols) {
    var hard_lines = 1;
    var last = 0;
    while ( true ) {
        last = strtocount.indexOf("\n", last+1);
        hard_lines ++;
        if ( last == -1 ) break;
    }
    var soft_lines = Math.round(strtocount.length / (cols-1));
    var hard = eval("hard_lines  " + unescape("%3e") + "soft_lines;");
    if ( hard ) soft_lines = hard_lines;
    return soft_lines;
}
function cleanForm() {
    var the_form = document.forms[3];
    for ( var x in the_form ) {
        if ( ! the_form[x] ) continue;
        if( typeof the_form[x].rows != "number" ) continue;
        the_form[x].rows = countLines(the_form[x].value,the_form[x].cols) +1;
    }
    setTimeout("cleanForm();", 300);
}

    window.onload = cleanForm();
	//-->
	</script>
        
<script type="text/javascript">
<!--

function addRows()
{
var ni = document.getElementById('anotherLitRef');
var numi = document.getElementById('theValue');
var num = (document.getElementById("theValue").value -1)+ 2;
numi.value = num;
var divIdName = "anotherLitRef"+num;
var newdiv = document.createElement('div');
newdiv.setAttribute("id",divIdName);
newdiv.innerHTML =   	'<p><label for="litRefDesc"><span style="color: red;"></span>#{res["new_exp.litRef_Desc"]}</label><input name="litRefDesc" id="litRefDesc" type="text" size="50" maxlength="255" /></p><div class="clear"></div><p><label for="litRefURI"><span style="color: red;"></span>#{res["new_exp.litRef_URI"]}</label><input name="litRefURI" id="litRefURI" type="text" size="50" maxlength="255" /></p><div class="clear"></div>';
ni.appendChild(newdiv);
}

//-->
</script>
</ui:define>

  <ui:define name="content">
<div id="mainwrapper">
<div id="maincol">
<div class="innertubemain">
    <h:form>
        <p>Create a new experiment using the form below.  Once you have supplied the required information and have submitted the form the experiment will be added to your list of experiments as found in the             
            <h:commandLink action="my_experiments">
                <h:outputText value=" #{res['my_exp.pageTitle']}" />
        </h:commandLink> section.</p>
    </h:form>
<h:form>
	<fieldset>
		<legend>#{res['new_exp.legendGeneral']}</legend>
			<p><h:messages errorClass="errorMessage" infoClass="infoMessage"/>
		    	<h:outputLabel value="#{res['new_exp.expName']}" for="ename" ><span style='color:red;font-weight:bold;'> *</span></h:outputLabel>
	        	<h:inputText required="true" id="ename" value="#{ExperimentBean.ename}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" />
	        	<img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipName']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
        		<h:message for="ename" errorClass="errorMessage" infoClass="infoMessage"/>
			</p>
	<div class="clear"></div>
	
				

        <p><h:outputLabel value="#{res['new_exp.expSummary']}" for="esummary" ><span style="color:red;font-weight:bold;"> *</span></h:outputLabel>
<h:inputTextarea rows="2" cols="55" required="true" id="esummary" value="#{ExperimentBean.esummary}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" />
<img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipSummary']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
<h:message for="esummary" errorClass="errorMessage" infoClass="infoMessage"/>
</p>
<div class="clear"></div>

        <p><h:outputLabel value="#{res['new_exp.expParticipants']}" for="eparticipants" />
        <h:inputText required="false" id="eparticipants" value="#{ExperimentBean.eparticipants}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" /> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipParticipants']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>

    <p>
	<h:outputLabel value="#{res['new_exp.expFormalInformal']}" for="formality"  />
	 	<h:selectBooleanCheckbox value="#{ExperimentBean.formality}" id="formality" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" />
		<img src="../graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipFormalInformal']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
	</p>
	<div class="clear"></div>

</fieldset>
<fieldset>
    <legend>#{res['new_exp.legendContact']}</legend>
                            <p><h:outputLabel value="#{res['new_exp.expContactName']}" for="econtactname" ><span style="color:red;font-weight:bold;"> *</span></h:outputLabel>
	        	<h:inputText  required="true" id="econtactname" value="#{ExperimentBean.econtactname}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipContactName']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
                    <h:message for="econtactname" errorClass="errorMessage" infoClass="infoMessage"/></p>
<div class="clear"></div>

                            <p><h:outputLabel value="#{res['new_exp.expContactEmail']}" for="econtactemail" ><span style="color:red;font-weight:bold;"> *</span></h:outputLabel>
	        	<h:inputText  required="true" id="econtactemail" value="#{ExperimentBean.econtactemail}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipContactEmail']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
                    <h:message for="econtactemail" errorClass="errorMessage" infoClass="infoMessage"/></p>
<div class="clear"></div>

                            <p><h:outputLabel value="#{res['new_exp.expContactTel']}" for="econtacttel" ></h:outputLabel>
	        	<h:inputText  required="false" id="econtacttel" value="#{ExperimentBean.econtacttel}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipContactTel']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>

                            <p><h:outputLabel value="#{res['new_exp.expContactAddress']}" for="econtactaddress" ></h:outputLabel>
                            <h:inputTextarea rows="2" cols="55" required="false" id="econtactaddress" value="#{ExperimentBean.econtactaddress}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" ></h:inputTextarea> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipContactAddress']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>
    
</fieldset>

<fieldset>
    <legend>#{res['new_exp.legendReferences']}</legend>
    <p>
    	<h:outputLabel value="#{res['new_exp.expID']}" for="exid" />
	 	<h:inputText  required="false" id="exid" value="#{ExperimentBean.exid}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/>
	 	<img src="../graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipID']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
		<h:message for="exid" errorClass="errorMessage" />			
 	</p>
	<div class="clear"></div>
    
	<p>
		<h:outputLabel value="#{res['new_exp.expIdeas']}" for="eref" />
	 	<h:inputText required="false" id="eref" value="#{ExperimentBean.eref}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}">
	        <f:converter converterId="javax.faces.Long"/>
		</h:inputText>
		<h:message for="eref" errorClass="errorMessage" />
		<img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipIdeas']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
	</p>
	<div class="clear"></div>
        

                <p style="color:#006699;"><b>#{res['new_exp.litRef']}</b>
                </p>

                <div>
                    <p><h:outputLabel value="#{res['new_exp.litRef_Desc']}" for="litRefDesc" />
                        <h:inputText  required="#{((ExperimentBean.litRefURI!=null) and (ExperimentBean.litRefURI!=''))}" id="litRefDesc" value="#{ExperimentBean.litRefDesc}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/>
                        <h:message for="litRefDesc" errorClass="errorMessage" />			
                    </p>
                    <p><h:outputLabel value="#{res['new_exp.litRef_URI']}" for="litRefURI" />
                        <h:inputText  required="#{((ExperimentBean.litRefDesc!=null) and (ExperimentBean.litRefDesc!=''))}" id="litRefURI" value="#{ExperimentBean.litRefURI}" size="50" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/>
                        <h:message for="litRefURI" errorClass="errorMessage" />			
                    </p>
                </div>
<input type="hidden" value="1" id="theValue" />
<div id="anotherLitRef"> </div>
<p style="margin-left:110px;"><a href="javascript:;" onclick="addRows();">Add Another Literature Reference</a></p>
                
	<div class="clear"></div> 
</fieldset>

<fieldset>
    <legend>#{res['new_exp.legendTypes']}</legend>
    
    <p><h:outputLabel value="#{res['new_exp.expDigiType']}" for="dtype" ><span style="color:red;font-weight:bold;"> *</span></h:outputLabel>
    
    <h:selectManyListbox
 id="dtype" required="true" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"
  value="#{ExperimentBean.dtype}">
   <f:selectItems
    value="#{ExperimentBean.dtypeList}"/>
</h:selectManyListbox> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipObjectType']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>
    
<p>
    <h:outputLabel value="#{res['new_exp.expEtype']}" for="etype" ><span style="color:red;font-weight:bold;"> *</span></h:outputLabel>
        <h:selectOneMenu id="etype"
        value="#{ExperimentBean.etype}"
 readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}">
                <f:selectItems value="#{Manager_Backing.availableExperimentTypes}" />
        </h:selectOneMenu>
        <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipExperimentType']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" />
</p>
<div class="clear"></div>

</fieldset>

<fieldset>
<legend>#{res['new_exp.legendFurtherInfo']}</legend>
<p><h:outputLabel value="#{res['new_exp.expPurpose']}" for="epurpose" ></h:outputLabel>
<h:inputTextarea rows="2" cols="55" required="false" id="epurpose" value="#{ExperimentBean.epurpose}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" /> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipPurpose']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>


<p><h:outputLabel value="#{res['new_exp.expFocus']}" for="efocus" ></h:outputLabel>
<h:inputTextarea rows="2" cols="55" required="false" id="efocus" value="#{ExperimentBean.efocus}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" /> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipFocus']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>
				<div class="clear"></div>

<p><h:outputLabel value="#{res['new_exp.expScope']}" for="escope" ></h:outputLabel>
<h:inputTextarea rows="2" cols="55" required="false" id="escope" value="#{ExperimentBean.escope}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" /> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipScope']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>

					<p><h:outputLabel value="#{res['new_exp.expConsiderations']}" for="econsiderations" />
<h:inputTextarea rows="2" cols="55" required="false" id="econsiderations" value="#{ExperimentBean.econsiderations}" readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}" /> <img src="${facesContext.externalContext.requestContextPath}/graphics/help.gif" alt="" title="" onmouseover="return overlib('&lt;p style=\'width:121px;text-align:left;\'&gt;#{res['new_exp.tooltipConsiderations']}&lt;/p&gt;', OFFSETX, 20, OFFSETY, -20, WIDTH, 130);" onmouseout="return nd();" /></p>
<div class="clear"></div>
</fieldset>
		<p>
            <h:commandButton value="#{res['new_exp.saveStage1']}" 
            action="#{Manager_Backing.updateBasicPropsAction}"/>		
		</p>
</h:form>

    <ui:include src="/WEB-INF/templates/comment_template.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
       <ui:param name="ExperimentPhase" value="1" />
    </ui:include>

</div>
</div>
</div>


<div id="leftcol">

<h3 class="leftcol">#{res['new_exp.progress']}</h3>
<div class="innertube">
<ul class="exp"><h:form>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 1 || ExperimentBean.currentStage == 1}">
                                    <li class="exp_sel"><a href="#" class="exp">#{res['new_exp.stage1']}</a></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage > 1}">
					<li class="exp_sel"><a href="#" class="exp_done">#{res['new_exp.stage1']}</a></li>
				</h:panelGroup>	
	<h:panelGroup rendered="#{ExperimentBean.currentStage >= 2}">
		<li class="exp"><h:commandLink action="goToStage2"
					styleClass="exp_done">
				<t:outputText value="#{res['new_exp.stage2']}" />
		</h:commandLink></li>
	</h:panelGroup>
        	<h:panelGroup rendered="#{ExperimentBean.currentStage lt 2}">
		<li class="exp_nd">#{res['new_exp.stage2']}</li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage >= 3}">
		<li class="exp"><h:commandLink action="goToStage3"
					styleClass="exp_done">
				<t:outputText value="#{res['new_exp.stage3']}" />
		</h:commandLink></li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage lt 3}">
		<li class="exp_nd">#{res['new_exp.stage3']}</li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage >= 4}">
		<li class="exp"><h:commandLink action="goToStage4"
					styleClass="exp_done">
				<t:outputText value="#{res['new_exp.stage4']}" />
		</h:commandLink></li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage lt 4}">
		<li class="exp_nd">#{res['new_exp.stage4']}</li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage >= 5}">
		<li class="exp"><h:commandLink action="goToStage5"
					styleClass="exp_done">
				<t:outputText value="#{res['new_exp.stage5']}" />
		</h:commandLink></li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage lt 5}">
		<li class="exp_nd">#{res['new_exp.stage5']}</li>
	</h:panelGroup>		
	<h:panelGroup rendered="#{ExperimentBean.currentStage >= 6}">
		<li class="exp"><h:commandLink action="goToStage6"
					styleClass="exp_done">
				<t:outputText value="#{res['new_exp.stage6']}" />
		</h:commandLink></li>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage lt 6}">
		<li class="exp_nd">#{res['new_exp.stage6']}</li>
	</h:panelGroup>	
	</h:form>
</ul>
</div>
</div>

  </ui:define>
  <ui:define name="footer">
		<ui:include src="/WEB-INF/templates/footer.xhtml"/>
	</ui:define>
</ui:composition>

</body>
</html>
