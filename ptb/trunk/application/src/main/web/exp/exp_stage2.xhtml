<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jstl/core">
<body>
<f:view>
<ui:composition template="/WEB-INF/templates/main_template.xhtml">
	<ui:define name="title">
        #{res.title} - <h:outputText value="#{ExperimentBean.ename}"/> : #{res['exp_stage2.pageTitle']}
  </ui:define>

	<ui:define name="header">
		<ui:include src="/WEB-INF/templates/header.xhtml">
			<ui:param name="page" value="new_exp" />
		</ui:include>
		<script type="text/javascript"
			src="${facesContext.externalContext.requestContextPath}/js/overlib/overlib.js"></script>
		<script type="text/javascript">
			var valid_extensions = /(.jpg|.jpeg|.gif)$/i;

			function checkExtension(fld) {
			    if (valid_extensions.test(fld.value)) return true;
			    alert('The selected file is of the wrong type.');
			    fld.select();
			    fld.focus();
			    return false;
			}
		</script>	
		<!-- css popup javascript -->
		<script type="text/javascript"
			src="${facesContext.externalContext.requestContextPath}/js/csspopup/csspopup.js">
		</script>	

	</ui:define>

	<ui:define name="content" rendered="#{ExperimentBean != null}">
		<div id="mainwrapper">
		<div id="maincol">
		<div class="innertubemain">
<h:form>
      <table id="expHeaderTable"><tr>
      <td class="headerText">
      <h2><h:outputText value="#{res['new_exp.stage2']}"/></h2>
      </td>
      <td class="headerButtons">
      <h:commandButton value="OLD #{res['exp_stage2.proceed']}"
                                    action="#{NewExp_Controller.commandSaveStep2Substep2Action}"/>
      <h:commandButton value="#{res['button.save']}"
                                    action="#{NewExp_Controller.commandSaveExperiment}"
                                    disabled="#{ExperimentBean.approved}" />
      </td>
      </tr></table>
</h:form>
     
        <c:if test="#{ExperimentBean.oldExperiment}">

    <ui:include src="/WEB-INF/templates/old-exps/stage2_body.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
    </ui:include>
        
        </c:if>
        <c:if test="#{ ! ExperimentBean.oldExperiment}">
        
    <ui:include src="/WEB-INF/templates/exp-types/stage2.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
    </ui:include>
        
        </c:if>

    
		<p>&#160;</p>
		<p>&#160;</p>

		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>


    <ui:include src="/WEB-INF/templates/comment_template.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
       <ui:param name="ExperimentPhase" value="2" />
    </ui:include>

        </div>
        </div>
		</div>


        <!-- The Left Column -->
		<div id="leftcol">
    
        <!-- Include the standard experiment builder sidebar. -->
        <ui:include src="/WEB-INF/templates/exp_sidebar.xhtml">
           <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
           <ui:param name="ExperimentPhase" value="2" />
        </ui:include>

		</div>
		
	</ui:define>
	<ui:define name="footer">
		<ui:include src="/WEB-INF/templates/footer.xhtml" />
	</ui:define>
</ui:composition>
</f:view>
</body>
</html>
