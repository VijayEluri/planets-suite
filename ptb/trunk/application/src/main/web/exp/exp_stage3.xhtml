<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<body>
<ui:composition template="/WEB-INF/templates/main_template.xhtml">
	<ui:define name="title">
        #{res.title} - #{ExperimentBean.ename}: #{res['exp_stage3.pageTitle']}
  </ui:define>

	<ui:define name="header">
		<ui:include src="/WEB-INF/templates/header.xhtml">
			<ui:param name="page" value="new_exp" />
		</ui:include>
		<script type="text/javascript"
			src="${facesContext.externalContext.requestContextPath}/js/overlib/overlib.js"></script>
	</ui:define>

	<ui:define name="content">
#{NewExp_Controller.retrieveBenchmarkBeans}
		<div id="mainwrapper">
			<div id="maincol">
				<div class="innertubemain">
					<p>Supply information about the estimated resources your experiment will require and the objectives you expect your experiment to meet.</p>
					<h:form id="stage3form">
						<h:messages for="stage3form" errorClass="errorMessage" infoClass="infoMessage"/>
						<fieldset>
							<legend>#{res['exp_stage3.legendOutcomes']}</legend>
							<p>Here you can speficy the Benchmark Goals for your experiment.  These will be used during the evaluation of your experiment to provide a record of the goals of your experiment and whether these goals were achieved.</p>		

						  	<h:dataTable id="dataTable" var="bm" value="#{BenchmarkBeans}"			    	              
			        	          rowId="#{bm.ID}"
			            	      cellpadding="2"
			                	  cellspacing="0"
				                  border="1">
							        <h:column>
									    <h:selectBooleanCheckbox id="selected" value="#{bm.selected}"  readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/>				            	
						            </h:column>
							        <h:column>
			            				<f:facet name="header">#{res['exp_stage3.bgCriteria']}</f:facet>
						            	#{bm.name}
						        	</h:column>			        	
							        <h:column>
			            				<f:facet name="header">#{res['exp_stage3.bgExplanation']}</f:facet>
						            	#{bm.definition} <br/>
						            	<i>#{bm.description}</i>
						        	</h:column>			        	

							</h:dataTable>
						</fieldset>
							<p>
					            <h:commandButton value="#{res['button.save']}"  
					            action="#{NewExp_Controller.updateBenchmarksAction}"  readonly="#{ExperimentBean.approved}" disabled="#{ExperimentBean.approved}"/>		
							</p>
							<p>
					            <h:commandButton value="#{res['exp_stage3.saveSubmit']}" 
					            action="#{NewExp_Controller.updateBenchmarksAndSubmitAction}" disabled="#{ExperimentBean.approved}"/>										
							</p>
							<p><b>#{res['exp_stage3.warning']}</b></p>		
					</h:form>
            
    <ui:include src="/WEB-INF/templates/comment_template.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
       <ui:param name="ExperimentPhase" value="3" />
    </ui:include>
            
				</div>
			</div>
		</div>

		<div id="leftcol">

		<h3 class="leftcol">#{res['new_exp.progress']}</h3>
		<div class="innertube">
			<ul class="exp"><h:form>
				<li class="exp"><h:commandLink action="goToStage1"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage1']}" />
				</h:commandLink></li>
				<li class="exp"><h:commandLink action="goToStage2"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage2']}" />
				</h:commandLink></li>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 3 || ExperimentBean.currentStage == 3}">
                                    <li class="exp_sel"><a href="#" class="exp">#{res['new_exp.stage3']}</a></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage > 3}">
					<li class="exp_sel"><a href="#" class="exp_done">#{res['new_exp.stage3']}</a></li>
				</h:panelGroup>	
				<h:panelGroup rendered="#{ExperimentBean.currentStage >= 4}">
					<li class="exp"><h:commandLink action="goToStage4"
								styleClass="exp_done">
							<t:outputText value="#{res['new_exp.stage4']}" />
					</h:commandLink></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 4}">
					<li class="exp_nd">#{res['new_exp.stage4']}</li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage >= 5}">
					<li class="exp"><h:commandLink action="goToStage5"
								styleClass="exp_done">
							<t:outputText value="#{res['new_exp.stage5']}" />
					</h:commandLink></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 5}">
					<li class="exp_nd">#{res['new_exp.stage5']}</li>
				</h:panelGroup>		
				<h:panelGroup rendered="#{ExperimentBean.currentStage >= 6}">
					<li class="exp"><h:commandLink action="goToStage6"
								styleClass="exp_done">
							<t:outputText value="#{res['new_exp.stage6']}" />
					</h:commandLink></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 6}">
					<li class="exp_nd">#{res['new_exp.stage6']}</li>
				</h:panelGroup>	
				</h:form>
			</ul>			
		</div>
		</div>

	</ui:define>
	<ui:define name="footer">
		<ui:include src="/WEB-INF/templates/footer.xhtml" />
	</ui:define>
</ui:composition>

</body>
</html>
