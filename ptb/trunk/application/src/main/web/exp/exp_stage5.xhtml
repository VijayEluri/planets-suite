<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jstl/core">
<body>
<ui:composition template="/WEB-INF/templates/main_template.xhtml">
	<ui:define name="title">
        #{res.title} - #{ExperimentBean.ename}: #{res['exp_stage5.pageTitle']}
  </ui:define>

	<ui:define name="header">
		<ui:include src="/WEB-INF/templates/header.xhtml">
			<ui:param name="page" value="new_exp" />
		</ui:include>
	</ui:define>

	<ui:define name="content">
		<div id="mainwrapper">
		<div id="maincol">
		<div class="innertubemain">

<h:form>
	<h:panelGroup rendered="#{ExperimentBean.currentStage==5}">
                   <h:panelGroup rendered="#{not NewExp_Controller.experimentExecutionRunning}">
                   		<p>Your experiment has been setup and approved successfully - you may now <b>run the experiment's executable</b>: </p>
						<h:commandButton value="#{res['exp_stage5.button.run']}"
						action="#{NewExp_Controller.executeExperiment}"/>
				 	</h:panelGroup>
					<h:panelGroup rendered="#{NewExp_Controller.experimentExecutionRunning}" >
						<p>
							Your experiment is currently being executed. Depending on the intensity of your experiment this may take some time.
							<br/>
							<h:commandButton value="Refresh"
							action="#{NewExp_Controller.proceedToEvaluation}" />
						</p>
				   </h:panelGroup>
	</h:panelGroup>
	<h:panelGroup rendered="#{ExperimentBean.currentStage==6}">
						<h:panelGroup rendered="#{((NewExp_Controller.experimentExecutable.executionCompleted==true) and (NewExp_Controller.experimentExecutable.executableInvoked==true))}">
							<p>Experiment execution took place with the following details:</p>
							<div class="box">
    							<!--  display some statistics -->
								<h3 class="box">#{res['exp_stage5.statistics']}</h3>
								<p class="box">
								<b>#{res['exp_stage5.started']} </b>#{NewExp_Controller.experimentExecutable.executionStartDate.time}<br />
								<b>#{res['exp_stage5.ended']} </b>#{NewExp_Controller.experimentExecutable.executionEndDate.time}<br />
								<b>#{res['exp_stage5.nrOfInput']} </b>#{ExperimentBean.numberOfOutput}<br />
								<b>#{res['exp_stage5.nrOfOutput']} </b>#{ExperimentBean.numberOfInputFiles}<br />
								<b>#{res['exp_stage5.success']} </b>#{NewExp_Controller.experimentExecutable.executionSuccess}<br />
								</p>
							</div>
						</h:panelGroup>
                   <p>
						<h:commandButton value="#{res['exp_stage5.button.proceed']}"
						action="#{NewExp_Controller.proceedToEvaluation}" />
					</p>
	</h:panelGroup>
        
        
</h:form>
		<p>&#160;</p>
		<p>&#160;</p>

		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>
		<p>&#160;</p>



            
    <ui:include src="/WEB-INF/templates/comment_template.xhtml">
       <ui:param name="ExperimentBean" value="#{ExperimentBean}" />
       <ui:param name="ExperimentPhase" value="5" />
    </ui:include>
    
		</div>
		</div>
		</div>


		<div id="leftcol">

		<h3 class="leftcol">#{res['new_exp.progress']}</h3>
		<div class="innertube">
			<ul class="exp"><h:form>
				<li class="exp"><h:commandLink action="goToStage1"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage1']}" />
				</h:commandLink></li>
				<li class="exp"><h:commandLink action="goToStage2"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage2']}" />
				</h:commandLink></li>
				<li class="exp"><h:commandLink action="goToStage3"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage3']}" />
				</h:commandLink></li>
				<li class="exp"><h:commandLink action="goToStage4"
							styleClass="exp_done">
						<t:outputText value="#{res['new_exp.stage4']}" />
				</h:commandLink></li>
                                
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 5 || ExperimentBean.currentStage == 5}">
                                    <li class="exp_sel"><a href="#" class="exp">#{res['new_exp.stage5']}</a></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage > 5}">
					<li class="exp_sel"><a href="#" class="exp_done">#{res['new_exp.stage5']}</a></li>
				</h:panelGroup>	
                               
				<h:panelGroup rendered="#{ExperimentBean.currentStage > 6}">
					<li class="exp"><h:commandLink action="goToStage6"
								styleClass="exp_done">
							<t:outputText value="#{res['new_exp.stage6']}" />
					</h:commandLink></li>
				</h:panelGroup>
				<h:panelGroup rendered="#{ExperimentBean.currentStage lt 6 || ExperimentBean.currentStage == 6}">
					<li class="exp_nd">#{res['new_exp.stage6']}</li>
				</h:panelGroup>	
				</h:form>
			</ul>											
		</div>
		</div>

	</ui:define>
	<ui:define name="footer">
		<ui:include src="/WEB-INF/templates/footer.xhtml" />
	</ui:define>
</ui:composition>

</body>
</html>