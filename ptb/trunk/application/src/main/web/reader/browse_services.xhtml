<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
    
<body>

<ui:composition template="/WEB-INF/templates/main_template.xhtml">
  <ui:define name="title">
        #{res.title} - #{res['browse_services.pageTitle']}
  </ui:define>

	<ui:define name="header">
		<ui:include src="/WEB-INF/templates/header.xhtml">
			<ui:param name="page" value="browse_services"/>
		</ui:include>
	</ui:define>

	<ui:define name="content">

	<div id="mainwrapper">
	<div id="maincol">
	<div class="innertubemain">
	<h:form>
  
      <rich:panel style="padding:0; min-height: 400px;" headerClass="outpanelHeader">
        <f:facet name="header">
            Service Browser
        </f:facet>
        <h:panelGrid columns="2" class="sbtTable" columnClasses="sbtcol1, sbtcol2">
        
    <h:panelGroup>
    <rich:tree nodeSelectListener="#{ServiceBrowser.processSelection}" 
        reRender="selectedService" ajaxSubmitSelection="true"  switchType="ajax" 
        value="#{ServiceBrowser.treeNode}" var="item" nodeFace="#{item.type}" toggleOnClick="true">
        
      <h:outputText value="#{item.type}"/>
      
      <rich:treeNode type="category">
        <h:outputText value="#{item.category}"/>
      </rich:treeNode>
      <rich:treeNode type="service" iconLeaf="/graphics/toolbar_services.gif" icon="/graphics/toolbar_services.gif">
        <h:outputText value="#{item.service.name}"/>
      </rich:treeNode>
      
    </rich:tree>
    </h:panelGroup>
                
    <h:panelGroup id="selectedService">
        <h2><h:outputText escape="false" value="#{ServiceBrowser.nodeTitle}"  /><h:outputLink value="#{ServiceBrowser.selectedService.endpoint}" target="_new"> [wsdl<t:graphicImage value="/graphics/external-link.png"/>]</h:outputLink></h2>
        <h:outputText escape="false" value="#{ServiceBrowser.selectedService.type}"  /><br/>
        <h:outputText escape="false" value="#{ServiceBrowser.selectedService.dateOfUseString}"  /><br/>
        <br/>
        <h:outputText escape="false" value="#{ServiceBrowser.selectedService.serviceDescription.description}"  /><br/>
        <h:outputText escape="false" value="#{ServiceBrowser.selectedService.serviceDescription.author}"  /><br/>
        <h:outputText escape="false" value="#{ServiceBrowser.selectedService.serviceDescription.serviceProvider}"  /><br/>
        
        <a4j:status startStyleClass="statusSearching" stopStyleClass="statusDone"/>
        
    </h:panelGroup>
    
        </h:panelGrid>
    </rich:panel>

    
	<div class="servicepane">
	<div class="serviceoptions">
		<p>You are currently viewing a list of <b>all available services</b> that have been registered within the Testbed application and therefore can be included within a new experiment.
		If you are missing a certain service, please contact the Testbed administrator.</p>
		<br/>
		click here to<h:commandLink action="#{ServiceTemplateBrowser.reloadDataFromDB}" value=" refresh the table"/><br/>
	</div>
  
    <ui:include src="/WEB-INF/templates/browse_servicetree_template.xhtml">
    	<ui:param name="renderList" value="true" />
    </ui:include>
	
	
	<div class="servicemain">
	</div>
	</div>
	</h:form>
	
	<p>&nbsp;</p>
	<p>&nbsp;</p>
	<p>&nbsp;</p>
	<p>&nbsp;</p>
	<p>&nbsp;</p>
    </div>
    </div>
    </div>
	
	
	<div id="leftcol">
	
	<h3 class="leftcol">Listing Options</h3>
	<div class="innertube">
	<p class="leftcol">Options to change the listing of services will appear here in later versions.</p>
	</div>
	<h3 class="leftcol">Restrict Result Set</h3>
	<div class="innertube">
	<p class="leftcol">The option to limit the display of services based on supplied criteria will appear here in later versions.</p>
	
	</div>
	</div>
	

	</ui:define>

	<ui:define name="footer">
		<ui:include src="/WEB-INF/templates/footer.xhtml"/>
	</ui:define>
</ui:composition>

</body>
</html>